var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){"use strict";var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=t.URL||t.webkitURL||t,o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in o,a=function(n){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},c=t.webkitRequestFileSystem,u=t.requestFileSystem||c||t.mozRequestFileSystem,s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},d="application/octet-stream",f=0,l=[],v=function(){for(var t=l.length;t--;){var e=l[t];"string"==typeof e?r.revokeObjectURL(e):e.remove()}l.length=0},w=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var o=t["on"+e[r]];if("function"==typeof o)try{o.call(t,n||t)}catch(i){s(i)}}},p=function(e,r){var s,v,p,y=this,h=e.type,R=!1,m=function(){var t=n().createObjectURL(e);return l.push(t),t},E=function(){w(y,"writestart progress write writeend".split(" "))},S=function(){(R||!s)&&(s=m(e)),v&&(v.location.href=s),y.readyState=y.DONE,E()},b=function(t){return function(){return y.readyState!==y.DONE?t.apply(this,arguments):void 0}},g={create:!0,exclusive:!1};return y.readyState=y.INIT,r||(r="download"),i?(s=m(e),o.href=s,o.download=r,a(o),y.readyState=y.DONE,void E()):(t.chrome&&h&&h!==d&&(p=e.slice||e.webkitSlice,e=p.call(e,0,e.size,d),R=!0),c&&"download"!==r&&(r+=".download"),v=h===d||c?t:t.open(),u?(f+=e.size,void u(t.TEMPORARY,f,b(function(t){t.root.getDirectory("saved",g,b(function(t){var n=function(){t.getFile(r,g,b(function(t){t.createWriter(b(function(n){n.onwriteend=function(e){v.location.href=t.toURL(),l.push(t),y.readyState=y.DONE,w(y,"writeend",e)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&S()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=y["on"+t]}),n.write(e),y.abort=function(){n.abort(),y.readyState=y.DONE},y.readyState=y.WRITING}),S)}),S)};t.getFile(r,{create:!1},b(function(t){t.remove(),n()}),b(function(t){t.code===t.NOT_FOUND_ERR?n():S()}))}),S)}),S)):void S())},y=p.prototype,h=function(t,e){return new p(t,e)};return y.abort=function(){var t=this;t.readyState=t.DONE,w(t,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,t.addEventListener("unload",v,!1),h}(self);