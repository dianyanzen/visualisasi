if("function"!=typeof Blob||"undefined"==typeof URL)if("function"==typeof Blob&&"undefined"!=typeof webkitURL)var URL=webkitURL;else var Blob=function(t){"use strict";var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},o=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},a=n.prototype,i=o.prototype,r=t.FileReaderSync,c=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,s=t.URL||t.webkitURL||t,d=s.createObjectURL,f=s.revokeObjectURL,R=s,p=t.btoa,b=t.atob,h=!1,g=function(t){h=!t},B=t.ArrayBuffer,U=t.Uint8Array;for(o.fake=i.fake=!0;u--;)c.prototype[l[u]]=u+1;try{U&&g.apply(0,new U(1))}catch(y){}return s.createObjectURL||(R=t.URL={}),R.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof o?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):d?d.call(s,t):void 0},R.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(s,t)},a.append=function(t){var n=this.data;if(U&&(t instanceof B||t instanceof U))if(h)n.push(String.fromCharCode.apply(String,new U(t)));else for(var a="",i=new U(t),l=0,u=i.length;u>l;l++)a+=String.fromCharCode(i[l]);else if("Blob"===e(t)||"File"===e(t)){if(!r)throw new c("NOT_READABLE_ERR");var s=new r;n.push(s.readAsBinaryString(t))}else t instanceof o?"base64"===t.encoding&&b?n.push(b(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},a.getBlob=function(t){return arguments.length||(t=null),new o(this.data.join(""),t,"raw")},a.toString=function(){return"[object BlobBuilder]"},i.slice=function(t,e,n){var a=arguments.length;return 3>a&&(n=null),new o(this.data.slice(t,a>1?e:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},n}(t);return function(t,n){var o=n?n.type||"":"",a=new e;if(t)for(var i=0,r=t.length;r>i;i++)a.append(t[i]);return a.getBlob(o)}}(self);